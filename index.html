<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é˜¿æ‹‰ä¼¯è¯­è¯å¡å­¦ä¹ ç½‘ç«™</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 2rem;
      text-align: center;
    }
    .card {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .word { font-size: 2.5rem; color: #1a73e8; margin-bottom: 0.5rem; }
    .pinyin { font-size: 1.2rem; color: #444; }
    .translation, .example {
      margin-top: 1rem;
      font-size: 1.1rem;
    }
    button {
      margin-top: 2rem;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #1a73e8;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="word" id="arabicWord">åŠ è½½ä¸­...</div>
    <div class="pinyin" id="pinyin">æ‹¼éŸ³åŠ è½½ä¸­...</div>
    <div class="translation" id="translations">ç¿»è¯‘åŠ è½½ä¸­...</div>
    <div class="example" id="example">ä¾‹å¥åŠ è½½ä¸­...</div>
    <audio id="audio" controls style="margin-top:1rem;"></audio>
    <button onclick="loadNextCard()">ä¸‹ä¸€æ¡</button>
  </div>

  <script>
    const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY'; // ğŸ”’ è¯·å°†æ­¤æ”¾åˆ°ä¸­è½¬æœåŠ¡ä¸­ï¼Œå‰ç«¯å‹¿æš´éœ²

    async function fetchFromGemini(prompt) {
      const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" + GEMINI_API_KEY, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{
            parts: [{ text: prompt }]
          }]
        })
      });
      const data = await response.json();
      return data.candidates?.[0]?.content?.parts?.[0]?.text || "å†…å®¹ç”Ÿæˆå¤±è´¥";
    }

    async function loadNextCard() {
      const wordList = ['Ù„ÙØ§Ø¦Ù', 'Ø­Ø¯ÙŠØ¯', 'Ø²Ù†Ùƒ', 'Ù…Ø¬Ù„ÙÙ†', 'Ø·Ù„Ø§Ø¡']; // ç¤ºä¾‹é˜¿è¯­è¯æ±‡ï¼Œå¯ä»è¿œç¨‹åŠ è½½
      const randomWord = wordList[Math.floor(Math.random() * wordList.length)];

      const prompt = `è¯·ç”¨å­¦ä¹ è€…è§†è§’å¸®æˆ‘è§£é‡Šè¿™ä¸ªé˜¿æ‹‰ä¼¯è¯­è¯ï¼š${randomWord}ï¼Œè¾“å‡ºJSONç»“æ„ï¼Œå†…å®¹åŒ…æ‹¬ï¼š\n1. ä¸­æ–‡ç¿»è¯‘\n2. è‹±æ–‡ç¿»è¯‘\n3. é˜¿è¯­æ‹¼éŸ³ï¼ˆæ‹¼éŸ³é£æ ¼æ¥è¿‘æ±‰è¯­ï¼‰\n4. é˜¿è¯­ä¾‹å¥ + ä¸­æ–‡ç¿»è¯‘\n5. é€šä¿—è®°å¿†å£è¯€`;      

      const result = await fetchFromGemini(prompt);

      try {
        const parsed = JSON.parse(result);
        document.getElementById("arabicWord").innerText = randomWord;
        document.getElementById("pinyin").innerText = parsed["é˜¿è¯­æ‹¼éŸ³"];
        document.getElementById("translations").innerText = `ä¸­æ–‡: ${parsed["ä¸­æ–‡ç¿»è¯‘"]} | è‹±æ–‡: ${parsed["è‹±æ–‡ç¿»è¯‘"]}`;
        document.getElementById("example").innerText = `ä¾‹å¥: ${parsed["é˜¿è¯­ä¾‹å¥"]}\n${parsed["ä¸­æ–‡ç¿»è¯‘ä¾‹å¥"]}`;

        const audioUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(randomWord)}&tl=ar&client=tw-ob`;
        document.getElementById("audio").src = audioUrl;

      } catch (e) {
        document.getElementById("arabicWord").innerText = "è§£æé”™è¯¯";
        document.getElementById("translations").innerText = result;
        console.error("è§£æå¤±è´¥ï¼š", e, result);
      }
    }

    window.onload = loadNextCard;
  </script>
</body>
</html>
